<!DOCTYPE html>
<html lang="pt-br">

<head>
   <meta charset="UTF-8">
   <title>Compromissos</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <script src="js/api.js"></script>
   <script src="js/formatadores.js"></script>
   <script src="js/compromisso.js"></script>
</head>

<body>

   <h2>Novo compromisso</h2>

   <form id="form-compromisso">

      <input type="text" id="descricao" placeholder="Descrição" required><br><br>

      <select id="categoria" required>
         <option value="">Categoria</option>
         <option>Casa</option>
         <option>Alimentação</option>
         <option>Transporte</option>
         <option>Saúde</option>
         <option>Pets</option>
         <option>Educação</option>
         <option>Lazer</option>
      </select><br><br>

      <select id="tipo" required onchange="alterarTipo()">
         <option value="">Tipo</option>
         <option value="fixo">Fixo</option>
         <option value="variavel">Variável</option>
         <option value="cartao">Cartão</option>
      </select><br><br>

      <!-- FIXO / VARIÁVEL -->
      <div id="blocoPadrao" style="display:none">
         <input type="text" id="valor" placeholder="R$ 0,00" oninput="formatarMoeda(this)"><br><br>

         <input type="date" id="dataVencimentoFixoVariavel"><br><br>
      </div>

      <!-- CARTÃO -->
      <div id="blocoCartao" style="display:none">
         <select id="cartao">
            <option value="">Selecione</option>
            <option>Bradesco</option>
            <option>Itaú</option>
            <option>Mercado Pago</option>
         </select><br><br>
         <input type="text" id="valorTotal" placeholder="Valor total" oninput="formatarMoeda(this)"><br><br>

         <input type="number" id="parcelas" placeholder="Total de parcelas" min="1" max="60" onchange="gerarParcelas(this.value)"><br><br>

         <input type="date" id="dataVencimentoCartao"><br><br>
      </div>

      <button>Salvar compromisso</button>
   </form>

   <p id="msg"></p>

   <hr>

   <h2>Compromissos do mês</h2>

   <select id="filtroMes">
      <option value="1">Janeiro</option>
      <option value="2">Fevereiro</option>
      <option value="3">Março</option>
      <option value="4">Abril</option>
      <option value="5">Maio</option>
      <option value="6">Junho</option>
      <option value="7">Julho</option>
      <option value="8">Agosto</option>
      <option value="9">Setembro</option>
      <option value="10">Outubro</option>
      <option value="11">Novembro</option>
      <option value="12">Dezembro</option>
   </select>
   <input type="number" id="filtroAno" value="2026">

   <button onclick="listarCompromissos()">Buscar</button>

   <ul id="listaCompromissos"></ul>

</body>

</html>